<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:s="http://jboss.com/products/seam/taglib"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:a="http://richfaces.org/a4j"
    xmlns:rich="http://richfaces.org/rich"
    template="layout/template.xhtml">

<ui:define name="body">

    <h:form id="articulo" styleClass="edit">

        <rich:panel>
            <f:facet name="header">#{articuloHome.managed ? 'Edit' : 'Add'} Articulo</f:facet>



            <s:decorate id="cantidadField" template="layout/edit.xhtml">
                <ui:define name="label">Cantidad</ui:define>
                <h:inputText id="cantidad"
                          value="#{articuloHome.instance.cantidad}">
                    <a:support event="onblur" reRender="cantidadField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="codigoBarraField" template="layout/edit.xhtml">
                <ui:define name="label">Codigo barra</ui:define>
                <h:inputText id="codigoBarra"
                           size="30"
                      maxlength="30"
                          value="#{articuloHome.instance.codigoBarra}">
                    <a:support event="onblur" reRender="codigoBarraField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="currentCostoField" template="layout/edit.xhtml">
                <ui:define name="label">Current costo</ui:define>
                <h:inputText id="currentCosto"
                          value="#{articuloHome.instance.currentCosto}"
                           size="26">
                    <a:support event="onblur" reRender="currentCostoField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="descripcionField" template="layout/edit.xhtml">
                <ui:define name="label">Descripcion</ui:define>
                <h:inputText id="descripcion"
                           size="100"
                      maxlength="100"
                          value="#{articuloHome.instance.descripcion}">
                    <a:support event="onblur" reRender="descripcionField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="existenciaMaxField" template="layout/edit.xhtml">
                <ui:define name="label">Existencia max</ui:define>
                <h:inputText id="existenciaMax"
                          value="#{articuloHome.instance.existenciaMax}">
                    <a:support event="onblur" reRender="existenciaMaxField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="existenciaMinField" template="layout/edit.xhtml">
                <ui:define name="label">Existencia min</ui:define>
                <h:inputText id="existenciaMin"
                          value="#{articuloHome.instance.existenciaMin}">
                    <a:support event="onblur" reRender="existenciaMinField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>




            <s:decorate id="nombreField" template="layout/edit.xhtml">
                <ui:define name="label">Nombre</ui:define>
                <h:inputText id="nombre"
                           size="60"
                      maxlength="60"
                          value="#{articuloHome.instance.nombre}">
                    <a:support event="onblur" reRender="nombreField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>



            <s:decorate id="tipoArticuloField" template="layout/edit.xhtml">
                <ui:define name="label">Tipo articulo</ui:define>
                <h:inputText id="tipoArticulo"
                          value="#{articuloHome.instance.tipoArticulo}">
                    <a:support event="onblur" reRender="tipoArticuloField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="ubicacionField" template="layout/edit.xhtml">
                <ui:define name="label">Ubicacion</ui:define>
                <h:inputText id="ubicacion"
                           size="50"
                      maxlength="50"
                          value="#{articuloHome.instance.ubicacion}">
                    <a:support event="onblur" reRender="ubicacionField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="unidadField" template="layout/edit.xhtml">
                <ui:define name="label">Unidad</ui:define>
                <h:inputText id="unidad"
                           size="30"
                      maxlength="30"
                          value="#{articuloHome.instance.unidad}">
                    <a:support event="onblur" reRender="unidadField" bypassUpdates="true" ajaxSingle="true"/>
                </h:inputText>
            </s:decorate>

            <div style="clear:both">
                <span class="required">*</span>
                required fields
            </div>

        </rich:panel>

        <div class="actionButtons">

            <h:commandButton id="save"
                          value="Save"
                         action="#{articuloHome.persist}"
                       disabled="#{!articuloHome.wired}"
                       rendered="#{!articuloHome.managed}"/>

            <h:commandButton id="update"
                          value="Save"
                         action="#{articuloHome.update}"
                       rendered="#{articuloHome.managed}"/>

            <h:commandButton id="delete"
                          value="Delete"
                         action="#{articuloHome.remove}"
                      immediate="true"
                       rendered="#{articuloHome.managed}"/>

            <s:button id="cancelEdit"
                   value="Cancel"
             propagation="end"
                    view="/Articulo.xhtml"
                rendered="#{articuloHome.managed}"/>

            <s:button id="cancelAdd"
                   value="Cancel"
             propagation="end"
                    view="/#{empty articuloFrom ? 'ArticuloList' : articuloFrom}.xhtml"
                rendered="#{!articuloHome.managed}"/>

        </div>
    </h:form>

<rich:tabPanel switchType="ajax">

    <rich:tab label="Genericos">
        <h:form styleClass="association" id="genericosChildren">

            <h:outputText value="There are no genericos associated with this articulo."
                       rendered="#{empty articuloHome.genericos}"/>

            <rich:dataTable value="#{articuloHome.genericos}"
                           var="_generico"
                      rendered="#{not empty articuloHome.genericos}"
                    rowClasses="rvgRowOne,rvgRowTwo"
                            id="genericosTable">
                <rich:column sortBy="#{_generico.id}">
                    <f:facet name="header">Id</f:facet>
                    <h:outputText value="#{_generico.id}"/>
                </rich:column>
                <rich:column sortBy="#{_generico.fecha}">
                    <f:facet name="header">Fecha</f:facet>
                    <h:outputText value="#{_generico.fecha}">
                        <s:convertDateTime type="date" dateStyle="short"/>
                    </h:outputText>
                </rich:column>
                <rich:column sortBy="#{_generico.isActive}">
                    <f:facet name="header">Is active</f:facet>
                    <h:outputText value="#{_generico.isActive}"/>
                </rich:column>
            </rich:dataTable>

        </h:form>

        <f:subview rendered="#{articuloHome.managed}" id="genericos">
        <div class="actionButtons">
            <s:button id="addgenerico"
                   value="Add generico"
                    view="/GenericoEdit.xhtml"
             propagation="none">
                 <f:param name="articuloId"
                         value="#{articuloHome.instance.id}"/>
                 <f:param name="genericoFrom" value="Articulo"/>
            </s:button>
        </div>
        </f:subview>
    </rich:tab>

    <rich:tab label="Linea">
    <div class="association" id="lineaParent">

        <h:outputText value="There is no linea associated with this articulo."
                   rendered="#{articuloHome.instance.linea == null}"/>

        <rich:dataTable var="_linea"
                   value="#{articuloHome.instance.linea}"
                rendered="#{articuloHome.instance.linea != null}"
              rowClasses="rvgRowOne,rvgRowTwo"
                      id="lineaTable">
            <h:column>
                <f:facet name="header">Id</f:facet>
                <h:outputText value="#{_linea.id}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Codigo</f:facet>
                <h:outputText value="#{_linea.codigo}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Detalle</f:facet>
                <h:outputText value="#{_linea.detalle}"/>
            </h:column>
            <h:column>
                <f:facet name="header">Nombre</f:facet>
                <h:outputText value="#{_linea.nombre}"/>
            </h:column>
        </rich:dataTable>

        <div class="actionButtons">
            <s:button id="#{articuloHome.instance.linea != null ? 'changeParent' : 'selectParent'}" value="#{articuloHome.instance.linea != null ? 'Change' : 'Select'} linea"
                       view="/LineaList.xhtml">
                <f:param name="from" value="ArticuloEdit"/>
            </s:button>
        </div>

    </div>
    </rich:tab>

    <rich:tab label="Precios">
        <h:form styleClass="association" id="preciosChildren">

            <h:outputText value="There are no precios associated with this articulo."
                       rendered="#{empty articuloHome.precios}"/>

            <rich:dataTable value="#{articuloHome.precios}"
                           var="_precio"
                      rendered="#{not empty articuloHome.precios}"
                    rowClasses="rvgRowOne,rvgRowTwo"
                            id="preciosTable">
                <rich:column sortBy="#{_precio.id}">
                    <f:facet name="header">Id</f:facet>
                    <h:outputText value="#{_precio.id}"/>
                </rich:column>
                <rich:column sortBy="#{_precio.costo}">
                    <f:facet name="header">Costo</f:facet>
                    <h:outputText value="#{_precio.costo}">
                        <f:convertNumber/>
                    </h:outputText>
                </rich:column>
                <rich:column sortBy="#{_precio.fecha}">
                    <f:facet name="header">Fecha</f:facet>
                    <h:outputText value="#{_precio.fecha}">
                        <s:convertDateTime type="date" dateStyle="short"/>
                    </h:outputText>
                </rich:column>
                <rich:column sortBy="#{_precio.isActive}">
                    <f:facet name="header">Is active</f:facet>
                    <h:outputText value="#{_precio.isActive}"/>
                </rich:column>
                <rich:column sortBy="#{_precio.pvp}">
                    <f:facet name="header">Pvp</f:facet>
                    <h:outputText value="#{_precio.pvp}">
                        <f:convertNumber/>
                    </h:outputText>
                </rich:column>
                <rich:column sortBy="#{_precio.utilidad}">
                    <f:facet name="header">Utilidad</f:facet>
                    <h:outputText value="#{_precio.utilidad}">
                        <f:convertNumber/>
                    </h:outputText>
                </rich:column>
            </rich:dataTable>

        </h:form>

        <f:subview rendered="#{articuloHome.managed}" id="precios">
        <div class="actionButtons">
            <s:button id="addprecio"
                   value="Add precio"
                    view="/PrecioEdit.xhtml"
             propagation="none">
                 <f:param name="articuloId"
                         value="#{articuloHome.instance.id}"/>
                 <f:param name="precioFrom" value="Articulo"/>
            </s:button>
        </div>
        </f:subview>
    </rich:tab>
</rich:tabPanel>
</ui:define>

</ui:composition>
